function sendDropdownRole(t,e,n){$.ajax({url:"/change_role",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"json",data:{role:t,user:getUserByElement(n)}})}function sendDropdownCockpitAction(t,e,n){$.ajax({url:"cockpit/action",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"json",data:{action:t,oid:getProjectByElement(n)}})}function sendDropdownCockpitUser(t,e,n){$.ajax({url:"cockpit/change_user",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"json",data:{user:e,oid:getProjectByElement(n)}})}function saveNotice(t){var e="#input-"+t;$("#i-"+t).addClass("loading"),$.ajax({url:"cockpit/update",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"json",data:{value:$(e).val(),oid:t},complete:function(){setTimeout(function(){$("#i-"+t).removeClass("loading")},500)}})}function getUserByElement(t){return $(t).parent().closest(".card").attr("data-id")}function getProjectByElement(t){return $(t).parent().closest(".content").attr("data-id")}function stickyContext(){$(".ui.sticky").sticky({context:"#basecontent"})}function tableAccordion(){$(".accordion").accordion()}function tableSortFunction(){$("table").tablesort()}function getDataId(t){return $(t).attr("data-id")}function getValue(t){return $(t).attr("value")}function getSearchPromptValue(){var t=$(".search.prompt").val();return $(".results").html("<br>"),t}function refreshResponse(){stickyContext(),tableAccordion(),tableSortFunction(),flask_moment_render_all()}function renderCockpit(){tableAccordion(),tableSortFunction(),flask_moment_render_all(),$(".ui.dropdown.action").dropdown({transition:"scale",onChange:function(t,e,n){sendDropdownCockpitAction(t,e,n),"OPEN"==e?($(this).removeClass("grey green yellow orange"),$(this).addClass("green")):"WIP"==e?($(this).removeClass("grey green yellow orange"),$(this).addClass("yellow")):"ASSIGNED"==e?($(this).removeClass("grey green yellow orange"),$(this).addClass("orange")):"CLOSED"==e&&($(this).removeClass("grey green yellow orange"),$(this).addClass("grey"))}}),$(".ui.dropdown.user").dropdown({transition:"scale",onChange:function(t,e,n){sendDropdownCockpitUser(t,e,n)}}),$("#cockpit-secondary.menu .item.active").on("click",function(){$("#cockpit").trigger("click")}),$("#cockpittab").removeClass("loading"),console.log("Rerendering Cockpit after AJAX Call")}$(document).ready(function(){wordCloud(),$(".pointing.menu .item").tab(),$(".right.menu .item").on("click",function(){$(".pointing.menu .item").removeClass("active"),$(this).addClass("active")}),$(".pointing.menu .item").on("click",function(){$(".pointing.menu .item").removeClass("active"),$(this).addClass("active")}),$(".pointing.menu .header.item").on("click",function(){$(this).removeClass("active")}),$("div").on("click",".messagebox",function(){$.when($(".messagebox").fadeOut("slow")).done(function(){$(".messagebox").html("")})}),$(".ui.projectsearch.button").api({action:"search",on:"click",method:"POST",dataType:"html",urlData:{query:getSearchPromptValue},onComplete:function(t){$(".ui.image").transition({animation:"tada",duration:"1s"}),$.when($(".results").append(t)).done(function(){refreshResponse()})}}),$(".ui.today.button").api({action:"today",on:"click",method:"POST",dataType:"html",beforeSend:function(){$(".results").html("<br>"),refreshResponse()},onComplete:function(t){$.when($(".results").append(t)).done(function(){refreshResponse()})}}),$("#admin").tab({alwaysRefresh:!0,cache:!1,apiSettings:{action:"admin",method:"POST",dataType:"html",beforeSend:function(t){return $("#admintab").addClass("loading"),t},onResponse:function(t){return t},onComplete:function(t){$.when($("#admintab").removeClass("loading")).done(function(){$("").append(t)})}}}),$(document).on("click",".ui.button",function(){$(".ui.accept.button").api({action:"approval",method:"POST",data:{access:!0,dn:getDataId(this)},beforeSend:function(t){return t},onComplete:function(t){$.when($(this).parent().closest(".card").fadeOut("slow")).done(function(){$(this).parent().closest(".card").html("")})}}),$(".ui.deny.button").api({action:"approval",method:"POST",data:{access:!1,dn:getDataId(this)},beforeSend:function(t){return t},onComplete:function(t){$.when($(this).parent().closest(".card").fadeOut("slow")).done(function(){$(this).parent().closest(".card").html("")})}})}),$(document).on("mouseover mouseout",".vertical.menu .item",function(){$(".vertical.menu .item").tab(),$(".ui.dropdown").dropdown({transition:"scale",action:"activate",onChange:function(t,e,n){sendDropdownRole(t,e,n)}})}),$(document).on("mouseover mouseout",".ui.ban.button",function(){$(".ui.ban.button").api({action:"change ban",on:"click",method:"POST",data:{dn:getUserByElement(this),ban:!0},beforeSend:function(t){return t},onComplete:function(t){$(this).parent().closest(".card").fadeOut("slow"),$("#admin").click()}})}),$(document).on("mouseover mouseout",".ui.activate.button",function(){$(".ui.activate.button").api({action:"change ban",on:"click",method:"POST",data:{dn:getUserByElement(this),ban:!1},beforeSend:function(t){return t},onComplete:function(t){$(this).parent().closest(".card").fadeOut("slow"),$("#admin").click()}})}),$("#cockpit").tab({alwaysRefresh:!0,cache:!1,apiSettings:{action:"cockpit",method:"POST",dataType:"html",beforeSend:function(t){return $("#cockpittab").addClass("loading"),t},onResponse:function(t){return t},onComplete:function(t){$.when($("").append(t)).done(function(){setTimeout(function(){renderCockpit()},1)})}}}),$(document).on("mouseover mouseout",".plus.square.outline.icon",function(){$(".plus.square.outline.icon").api({action:"cockpit-add",method:"POST",on:"click",data:{oid:getDataId(this)},beforeSend:function(t){return t},onComplete:function(t){$.when($(this).removeClass("blue plus square outline")).done(function(){$(this).addClass("green checkmark box")})}})}),$(document).on("mouseover","#cockpit-secondary.menu .item",function(){$("#cockpit-secondary.menu .item").tab()}),$(document).on("mouseover mouseout",".refresh.profile",function(){$("div .refresh.profile").api({action:"refresh profile",method:"POST",beforeSend:function(t){return setTimeout(function(){$(".refresh icon").addClass("loading")},500),t},onComplete:function(t){$.when($(".refresh icon").removeClass("loading")).done(function(){$(".messagebox").hide().append(t.html).fadeIn("slow")})}})})}),$(document).keypress(function(t){13==t.which&&$(".ui.projectsearch.button").click()}),$.fn.api.settings.api={search:"/search/{query}",login:"/auth/login",logout:"/auth/logout",register:"/auth/register",admin:"/admin",approval:"/approval","refresh profile":"/refresh_profile","change role":"/change_role","change ban":"/auth/ban",cockpit:"/cockpit/","cockpit-add":"/cockpit/add","cockpit-rm":"/cockpit/rm","cockpit-update":"/cockpit/update","cockpit-action":"/cockpit/action",today:"/today"},function(p){p.tablesort=function(t,e){var n=this;this.$table=t,this.$thead=this.$table.find("thead"),this.settings=p.extend({},p.tablesort.defaults,e),this.$sortCells=0<this.$thead.length?this.$thead.find("th:not(.no-sort)"):this.$table.find("th:not(.no-sort)"),this.$sortCells.on("click.tablesort",function(){n.sort(p(this))}),this.index=null,this.$th=null,this.direction=null},p.tablesort.prototype={sort:function(n,o){var i=new Date,a=this,t=this.$table,s=0<t.find("tbody").length?t.find("tbody"):t,c=s.find("tr").has("td, th"),r=c.find(":nth-child("+(n.index()+1)+")").filter("td, th"),d=n.data().sortBy,l=[],u=r.map(function(t,e){return d?"function"==typeof d?d(p(n),p(e),a):d:null!=p(this).data().sortValue?p(this).data().sortValue:p(this).text()});0!==u.length&&(this.index!==n.index()?(this.direction="asc",this.index=n.index()):this.direction="asc"!==o&&"desc"!==o?"asc"===this.direction?"desc":"asc":o,o="asc"==this.direction?1:-1,a.$table.trigger("tablesort:start",[a]),a.log("Sorting by "+this.index+" "+this.direction),a.$table.css("display"),setTimeout(function(){a.$sortCells.removeClass(a.settings.asc+" "+a.settings.desc);for(var t=0,e=u.length;t<e;t++)l.push({index:t,cell:r[t],row:c[t],value:u[t]});l.sort(function(t,e){return a.settings.compare(t.value,e.value)*o}),p.each(l,function(t,e){s.append(e.row)}),n.addClass(a.settings[a.direction]),a.log("Sort finished in "+((new Date).getTime()-i.getTime())+"ms"),a.$table.trigger("tablesort:complete",[a]),a.$table.css("display")},2e3<u.length?200:10))},log:function(t){(p.tablesort.DEBUG||this.settings.debug)&&console&&console.log&&console.log("[tablesort] "+t)},destroy:function(){return this.$sortCells.off("click.tablesort"),this.$table.data("tablesort",null),null}},p.tablesort.DEBUG=!1,p.tablesort.defaults={debug:p.tablesort.DEBUG,asc:"sorted ascending",desc:"sorted descending",compare:function(t,e){return e<t?1:t<e?-1:0}},p.fn.tablesort=function(t){var e,n;return this.each(function(){e=p(this),(n=e.data("tablesort"))&&n.destroy(),e.data("tablesort",new p.tablesort(e,t))})}}(window.Zepto||window.jQuery);